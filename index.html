<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InPlay God Mode</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0f172a">

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚öΩ</text></svg>">
    
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #0f172a; color: #e2e8f0; padding: 15px; padding-bottom: 80px; }
        h2 { text-align: center; color: #38bdf8; margin-bottom: 5px; font-weight: 800; letter-spacing: 1px; }
        
        /* Profit Tracker Dashboard */
        .profit-board { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px; background: #1e293b; padding: 10px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #334155; text-align: center; }
        .profit-stat { font-size: 0.9em; color: #94a3b8; }
        .profit-val { font-size: 1.2em; font-weight: bold; color: #fff; }
        .val-green { color: #4ade80; }
        .val-red { color: #f87171; }
        .btn-reset { grid-column: span 3; background: none; border: none; color: #64748b; font-size: 0.75em; cursor: pointer; margin-top: 5px; text-decoration: underline; }

        /* Controls */
        .controls { display: grid; grid-template-columns: 1fr; gap: 10px; margin-bottom: 20px; }
        select { background: #1e293b; color: #fff; padding: 12px; border: 1px solid #475569; border-radius: 8px; font-size: 1em; width: 100%; font-weight: bold; appearance: none; }
        
        /* Main Buttons */
        .btn-scan { background: #8b5cf6; color: white; border: none; padding: 14px; border-radius: 12px; width: 100%; font-size: 1.1em; font-weight: bold; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .btn-scan:active { transform: scale(0.98); background: #7c3aed; }
        .btn-nav { background: #334155; color: #cbd5e1; border: 1px solid #475569; padding: 10px; border-radius: 8px; width: 100%; font-weight:bold; cursor: pointer; }
        .btn-schedule { background: #0f766e; color: #ccfbf1; border: 1px solid #115e59; padding: 10px; border-radius: 8px; width: 100%; font-weight:bold; cursor: pointer; }

        /* Card Styles */
        .card { background-color: #1e293b; padding: 15px; margin-bottom: 15px; border-radius: 12px; border-left: 6px solid #64748b; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2); position: relative; }
        .card.likelihood-High { border-left-color: #ef4444; } 
        .card.likelihood-Medium { border-left-color: #f59e0b; } 

        .match-header { display: flex; justify-content: space-between; align-items: center; color: #94a3b8; font-size: 0.85em; margin-bottom: 8px; }
        .star-rating { color: #fbbf24; letter-spacing: 2px; font-size: 1em; }
        
        .team-row { display: flex; align-items: center; justify-content: space-between; margin: 5px 0; font-size: 1.1em; font-weight: bold; }
        .team-info { display: flex; align-items: center; gap: 10px; }
        .team-logo { width: 28px; height: 28px; object-fit: contain; }
        .score { font-size: 1.3em; color: #fff; }

        /* TILT BAR */
        .tilt-container { height: 8px; background: #334155; border-radius: 4px; margin: 10px 0; overflow: hidden; display: flex; }
        .tilt-home { background: #3b82f6; height: 100%; transition: width 0.5s; }
        .tilt-away { background: #ef4444; height: 100%; transition: width 0.5s; }

        /* ADVISOR BOX */
        .advisor-box { background: #0f172a; padding: 10px; border-radius: 6px; font-size: 0.9em; text-align: center; color: #e2e8f0; border: 1px solid #334155; margin-bottom: 10px; display:flex; justify-content: space-around; align-items: center; }
        .market-tag { color: #2dd4bf; font-weight: bold; text-transform: uppercase; border: 1px solid #0f766e; padding: 2px 6px; border-radius: 4px; font-size: 0.8em; }
        .stake-tag { color: #f472b6; font-weight: bold; }

        /* Tools Row */
        .tools-row { display: grid; grid-template-columns: 1fr 3fr 1fr 1fr; gap: 8px; margin-top: 12px; }
        .btn-tool { border: none; border-radius: 6px; font-weight: bold; cursor: pointer; color: #fff; font-size: 0.9em; padding: 8px 0; }
        .btn-copy { background: #334155; color: #cbd5e1; }
        .btn-bet { background: #047857; }
        .btn-win { background: #0f766e; }
        .btn-loss { background: #991b1b; }

        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; background: #0f172a; padding: 10px; border-radius: 8px; font-size: 0.85em; margin-bottom: 12px; }
        .stat-item { display: flex; justify-content: space-between; }
        .stat-label { color: #64748b; }
        .highlight-stat { color: #fbbf24; font-weight: bold; }

        .badge-container { display: flex; gap: 5px; justify-content: center; margin-top: 8px; flex-wrap: wrap; }
        .badge { font-size: 0.75em; padding: 2px 8px; border-radius: 4px; font-weight: bold; text-transform: uppercase; }
        .badge-red { background: #ef4444; color: white; }
        .badge-yellow { background: #f59e0b; color: black; }
        .badge-blue { background: #3b82f6; color: white; }
        .badge-purple { background: #a855f7; color: white; }

        .error-msg { color: #fca5a5; background: #450a0a; padding: 10px; border-radius: 8px; text-align: center; margin-bottom: 15px; display: none; }
    </style>
</head>
<body>

    <h2>ü§ñ InPlay God Mode</h2>
    
    <div class="profit-board">
        <div><div class="profit-stat">Wins</div><div id="stat-wins" class="profit-val val-green">0</div></div>
        <div><div class="profit-stat">Losses</div><div id="stat-losses" class="profit-val val-red">0</div></div>
        <div><div class="profit-stat">Win Rate</div><div id="stat-rate" class="profit-val">0%</div></div>
        <button class="btn-reset" onclick="resetStats()">Reset Daily Stats</button>
    </div>

    <div id="error-display" class="error-msg"></div>

    <div class="controls">
        <a href="help.html" style="text-decoration:none;"><button class="btn-nav">üìñ Strategy Guide</button></a>
        <button class="btn-schedule" onclick="checkSchedule()">üìÖ Check 70th Min Times</button>
        <select id="league-filter">
            <option value="major">‚≠ê Major Leagues (API Saver)</option>
            <option value="goals">‚öΩ Goal Machines (Dutch/Aus/Swiss)</option>
            <option value="all">üåç Scan World (High Data Usage)</option>
        </select>
        <button class="btn-scan" onclick="startScan()">üîç RUN SCAN</button>
    </div>
    
    <div id="results"></div>

    <script>
        // CONFIGURATION
        const RAW_KEY = "0f29a2f96e9dd4231cee515cc5ec52b0"; 
        const API_KEY = RAW_KEY.trim(); 
        
        // GLOBAL STATE
        const resultsDiv = document.getElementById('results');
        const errorDiv = document.getElementById('error-display');
        let audioCtx = null;
        
        // SAFE STORAGE FOR TIPS
        window.MATCH_TIPS = {};

        const LEAGUES = {
            major: [2, 3, 39, 140, 78, 135, 61, 4, 144, 848, 40, 307],
            goals: [88, 103, 203, 188, 373, 206, 179, 180]
        };

        // --- PROFIT TRACKER ---
        function loadStats() {
            const wins = parseInt(localStorage.getItem('inplay_wins') || 0);
            const losses = parseInt(localStorage.getItem('inplay_losses') || 0);
            updateBoard(wins, losses);
        }

        function updateBoard(w, l) {
            document.getElementById('stat-wins').innerText = w;
            document.getElementById('stat-losses').innerText = l;
            const total = w + l;
            const rate = total === 0 ? 0 : Math.round((w / total) * 100);
            document.getElementById('stat-rate').innerText = rate + "%";
        }

        function recordResult(type) {
            let wins = parseInt(localStorage.getItem('inplay_wins') || 0);
            let losses = parseInt(localStorage.getItem('inplay_losses') || 0);
            if (type === 'win') wins++;
            if (type === 'loss') losses++;
            localStorage.setItem('inplay_wins', wins);
            localStorage.setItem('inplay_losses', losses);
            updateBoard(wins, losses);
        }

        function resetStats() {
            if(confirm("Reset today's stats?")) {
                localStorage.setItem('inplay_wins', 0);
                localStorage.setItem('inplay_losses', 0);
                updateBoard(0, 0);
            }
        }
        loadStats();

        // --- AUDIO ---
        function playAlertSound() {
            try {
                if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(800, audioCtx.currentTime); 
                oscillator.frequency.exponentialRampToValueAtTime(300, audioCtx.currentTime + 0.2); 
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.0
